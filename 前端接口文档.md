# 前端接口文档

## 登录模块

### 获取头像

+ 请求方式：`get`

+ url地址: `/login/getAvatar`

要求请求数据

```javascript
// url地址携带用户名
{
    username: xxx
}
```



请求成功

```javascript
{
    code: 0,  // 0为成功
    msg: '',  // 获取头像无响应信息
    data: {
        avatar: 'https://zos.alipayobjects.com/rmsportal/ODTLcjxAfvqbxHnVXCYX.png' // 返回头像地址
    }
}
```

请求失败（用户没有设置头像）

```javascript
{
    code: 1,
    msg: '', // 无需显示错误信息
    data: {} /
}
```



## 登录

+ 请求方式: `post`
+ 请求地址: `/login`



要求请求数据

```javascript
{
    username: xxx,
    password: xxx
}
```



请求成功

```javascript
{
    code: 0,
    msg: '登录成功'，
    data： {
        // 这里数据包括后端生成的token 以及用户全部信息，除了密码，用于显示在个人中心
    }
}
```

请求失败（用户名或者密码错误）

```javascript
{
    code: 1,
    msg: '登录失败，用户名或密码错误',
    data: {
        // 无
    }
}
```


## 使用token登录
+ 请求方式: `post`
+ 请求地址: `/check_token`


请求数据
```
{
    token: '...'
}
```

请求成功（token正确）


```
{
    code: 0,
    msg: '', // 正确不用返回信息
    data: {
        // 用户全部信息，包括token，不返回密码
    }
}
```

请求失败（如果token过期或者错误就代表请求失败）
```
{
    code: 1,
    msg: '', // 不用返回错误信息
    data: {
        // 无数据，需要用户前往登录
    }
}
```

## 获取系统flag
+ 请求方式: `post`
+ 请求地址: `/getFlags`


请求数据
/getFlags?page=1&offset=6
类似翻页

请求成功
```
{
    code: 0,
    msg: '', // 正确不用返回信息
    data: [..]  //返回flag列表  每次6个 
}
```


请求失败
```
{
    code: 1,
    msg: '', // 不用返回错误信息
    data: {}
}
```


## 获取要打卡的任务
+ 请求方式: `get`
+ 请求地址: `/getTasks?token=xxx`

请求数据
/getFlags?token=xxx


请求成功
```
{
    code: 0,
    msg: '', // 正确不用返回信息
    data: [
        {
            (键名看你怎么设置)id:xxx,
            title: xxx,
            content: xx
        }
    ]  //返回要打卡的任务列表 
}
```





请求失败
```
{
    code: 1,
    msg: '', // 不用返回错误信息
    data: {}
}
```




## 添加flag到打卡
+ 请求方式: `post`
+ 请求地址: `/addFlag`





系统打卡 请求数据
```
{
    token: '...',
    id: xxx  // flag的id,
}
```

自定义打卡请求数据
```
{
    token: '...',
    flag_title: xxx,
    flag_content: xxx
}
```
两种情况在一个接口处理



请求成功
```
{
    code: 0,
    msg: '添加成功', 
    data: {
        // 返回添加的flag信息，包括id
    }
}
```


请求失败
```
{
    code: 1,
    msg: '添加失败', 
    data: {}
}
```

## 点击打卡
+ 请求方式: `post`
+ 请求地址: `/punchFlag`


请求成功
```
{
    code: 0,
    msg: '打卡成功',
    data: {
       
    }
}
```


请求失败
```
{
    code: 1,
    msg: '打卡失败', 
    data: {}
}
```


## 修改昵称
+ 请求方式: `post`
+ 请求地址: `/profile/modifyNickname`

请求数据
{
    nickname:xxx,
    token:xxx
}

请求成功
```
{
    code: 0,
    msg: '修改成功', 
    data: {}
}
```


请求失败
```
{
    code: 1,
    msg: '修改失败', 
    data: {}
}
```

## 检查原密码是否正确
+ 请求方式: `post`
+ 请求地址: `/profile/checkPrepass`
请求数据
```
{
    prePass: xxx,
    token:xxx
}
```

请求成功
```
{
    code: 0,
    msg: '', 
    data: {}
}
```


请求失败
```
{
    code: 1,
    msg: '原密码错误', 
    data: {}
}
```

## 修改密码
+ 请求方式: `post`
+ 请求地址: `/profile/modifyPassword`
请求数据
```
{
    newPass: xxx,
    token:xxx
}
```

请求成功
```
{
    code: 0,
    msg: '修改成功', 
    data: {}
}
```


请求失败
```
{
    code: 1,
    msg: '修改失败，(说明下失败的原因)', 
    data: {}
}
```


## 获取总结打卡列表
+ 请求方式: `post`
+ 请求地址: `/getDailyPunch`
请求数据
```
{
    page:xxx
}
```

请求成功
```
{
    code: 0,
    msg: '', 
    data: {
        items: [
            id:xx,
            userName:xx,
            avatar:xx,
            title:xx,
            content:xx,
            ...其他
        ],
        page（当前页）:xx
    }
}
```


请求失败
```
{
    code: 1,
    msg: '', 
    data: {}
}
```

